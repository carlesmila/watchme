<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analysis of Autographer Images Annotations • watchme</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">watchme</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/masalmon/watchme">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">

<p>This package is under development.</p>
<div id="installation" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#installation" class="anchor"> </a>Installation</h1></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"devtools"</span>)
<span class="kw">install_github</span>(<span class="st">"masalmon/watchme"</span>, <span class="dt">build_vignettes=</span><span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"> </a>Introduction</h1>
<p>This package aims at supporting the analysis of annotation results of wearable camera images. The workflow is as follows:</p>
<ul>
<li><p>participants of a study wear a camera that automatically produces pictures;</p></li>
<li><p>these pictures are then annotated by coders using a list of annotations;</p></li>
<li><p>the results of these annotations are then used to e.g. reconstruct the sequence of activities of a person during the day, or link it to pollution exposure.</p></li>
</ul>
<p>This R package supports the last step. How to calculate interrater agreement? How to plot the data?</p>
</div>
<div id="data-structure" class="section level1">
<h1 class="hasAnchor">
<a href="#data-structure" class="anchor"> </a>Data structure</h1>
<p>The structure of data in the package is adapted to data produced using the Doherty Sensecam Browser for annotation (see <a href="https://sensecambrowser.codeplex.com/" class="uri">https://sensecambrowser.codeplex.com/</a>) and works with data produced using the XnView MP software. However, input functions could be adapted for other formats.</p>
<p>The data needed for using the package are:</p>
<ul>
<li>A list of possible annotation, called <code>dico</code>. It contains three columns Code, Meaning, Group. The Code is the unique X-digit identifier of an activity. The Meaning, preferably in a single word such as washingYourTeeth, explains the code. The Group allows to group activities into meaningful categories, i.e. washingYourTeeth and washingYourHands could be in the hygiene Group whereas eatingRealFood and snackingOnCheapChocolate could be in the eating Group. If you do not use abbreviations, Code and Meaning can be equal.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path_dico &lt;-<span class="st">  </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"dicoCoding_pinocchio.csv"</span>, <span class="dt">package =</span> <span class="st">"watchme"</span>)
sep_dico &lt;-<span class="st"> ";"</span>
dico &lt;-<span class="st"> </span><span class="kw">read.table</span>(path_dico, <span class="dt">sep =</span> sep_dico, <span class="dt">header=</span><span class="ot">TRUE</span>)
dico</code></pre></div>
<pre><code>##   Code            Meaning Group
## 1  01A BiomassCookingUnit     1
## 2  01B           LPGStove     1
## 3  01C   OtherCookingUnit     1
## 4  02B    PresenceKitchen     1
## 5  02A    FoodPreparation     1
## 6  03A             Eating     1
## 7  01.            Cooking    99</code></pre>
<ul>
<li>A table of coding results. The columns are name/nothing, image_path/X.Filename.With.Ext, image_time/EXIF.Date.Taken..Y.m.d_H.M.S., annotation/IPTC.Keywords. In this case the column name is a repetition of the participant name. The column image_path indicates the path to the picture, or its name. It only needs to be unique for each picture. The column image_time gives the date and time at which the picture was taken. The column annotation gives the code(s) associated with the picture. They can be pasted one after another, since we will use grepl() for finding the unique X-digit identifiers, or they can be on separate lines, since all codes for one picture identified by one picture_name will be merged.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path_results &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"image_level_pinocchio.csv"</span>, <span class="dt">package =</span> <span class="st">"watchme"</span>)
sep_results &lt;-<span class="st"> ","</span>
coding_results &lt;-<span class="st"> </span><span class="kw">read.table</span>(path_results, <span class="dt">sep =</span> sep_results, <span class="dt">header =</span> <span class="ot">TRUE</span>)
coding_results &lt;-<span class="st"> </span>dplyr::<span class="kw">tbl_df</span>(coding_results)
coding_results</code></pre></div>
<pre><code>## # A tibble: 981 × 4
##         name
##       &lt;fctr&gt;
## 1  pinocchio
## 2  pinocchio
## 3  pinocchio
## 4  pinocchio
## 5  pinocchio
## 6  pinocchio
## 7  pinocchio
## 8  pinocchio
## 9  pinocchio
## 10 pinocchio
## # ... with 971 more rows, and 3 more variables: image_path &lt;fctr&gt;,
## #   image_time &lt;fctr&gt;, annotation &lt;fctr&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path_results &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"sample_coding1.csv"</span>, <span class="dt">package =</span> <span class="st">"watchme"</span>)
sep_results &lt;-<span class="st"> "</span><span class="ch">\t</span><span class="st">"</span>
coding_results &lt;-<span class="st"> </span><span class="kw">read.table</span>(path_results, <span class="dt">sep =</span> sep_results, <span class="dt">header =</span> <span class="ot">TRUE</span>,
                    <span class="dt">quote  =</span>  <span class="st">"</span><span class="ch">\'</span><span class="st">"</span>)
coding_results &lt;-<span class="st"> </span>dplyr::<span class="kw">tbl_df</span>(coding_results)
coding_results</code></pre></div>
<pre><code>## # A tibble: 1,263 × 4
##                       X.Filename.With.Ext EXIF.Date.Taken..Y.m.d_H.M.S.
##                                    &lt;fctr&gt;                        &lt;fctr&gt;
## 1  "B00000000_21I6LW_20150612_115011E.JPG           2015-06-12_11-49-56
## 2  "B00000001_21I6LW_20150612_115012E.JPG           2015-06-12_11-49-59
## 3  "B00000002_21I6LW_20150612_115013E.JPG           2015-06-12_11-50-01
## 4  "B00000003_21I6LW_20150612_115014E.JPG           2015-06-12_11-50-04
## 5  "B00000004_21I6LW_20150612_115014E.JPG           2015-06-12_11-50-06
## 6  "B00000005_21I6LW_20150612_115015E.JPG           2015-06-12_11-50-09
## 7  "B00000006_21I6LW_20150612_115635E.JPG           2015-06-12_11-56-35
## 8  "B00000007_21I6LW_20150612_115710E.JPG           2015-06-12_11-57-10
## 9  "B00000008_21I6LW_20150612_120259E.JPG           2015-06-12_12-02-59
## 10 "B00000009_21I6LW_20150612_120335E.JPG           2015-06-12_12-03-35
## # ... with 1,253 more rows, and 2 more variables: IPTC.Keywords &lt;fctr&gt;,
## #   X.... &lt;fctr&gt;</code></pre>
</div>
<div id="from-input-data-to-tibble-data-frames" class="section level1">
<h1 class="hasAnchor">
<a href="#from-input-data-to-tibble-data-frames" class="anchor"> </a>From input data to <code>tibble</code> data.frames</h1>
<p>Using both these inputs, we create a tibble on which operations will be performed.</p>
<p>The object has the following variables:</p>
<ul>
<li><p>participant_id, Name or ID number of the participant (character)</p></li>
<li><p>image_time, Path or name of the image in order to be able to identify duplicates (character)</p></li>
<li><p>image_time, Time and date of each image (POSIXt)</p></li>
<li><p>booleanCodes, columns of boolean, indicating if a given code was given to a given picture. codes is a condensed form of this.</p></li>
<li><p><code>the attribute</code> dico, <code>tibble</code> for defining the codes with at least Code and Meaning column, and Group column for having groups of codes (e.g. sport encompasses running and swimming)</p></li>
</ul>
<p>The function used to create such an object is called <code>watchme_prepare_data</code>.</p>
<p>For finding both inputs and interpreting them the <code>watchme_prepare_data</code> function needs to know the paths to each file, <code>path_results</code> and <code>path_dico</code> and the separator used in each of them, <code>sep_results</code> and <code>sep_dico</code>.</p>
<p>Below we illustrate the use of <code>watchme_prepare_data</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"watchme"</span>)
path_results &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"image_level_pinocchio.csv"</span>, <span class="dt">package =</span> <span class="st">"watchme"</span>)
sep_results &lt;-<span class="st"> ","</span>
path_dico &lt;-<span class="st">  </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"dicoCoding_pinocchio.csv"</span>, <span class="dt">package =</span> <span class="st">"watchme"</span>)
sep_dico &lt;-<span class="st"> ";"</span>
results_table &lt;-<span class="st"> </span><span class="kw"><a href="reference/watchme_prepare_data.html">watchme_prepare_data</a></span>(<span class="dt">path_results=</span>path_results, <span class="dt">sep_results=</span>sep_results,
              <span class="dt">path_dico=</span>path_dico, <span class="dt">sep_dico=</span>sep_dico)
results_table</code></pre></div>
<pre><code>## # A tibble: 955 × 10
##                                                        image_path
##                                                             &lt;chr&gt;
## 1  \\2015-06-04 08-36-32\\\\B00000001_21I6LW_20150603_084228E.JPG
## 2                           B00000000_21I6LW_20150603_084228E.JPG
## 3  \\2015-06-04 08-36-32\\\\B00000002_21I6LW_20150603_084236E.JPG
## 4                           B00000003_21I6LW_20150603_084313E.JPG
## 5                           B00000004_21I6LW_20150603_084349E.JPG
## 6                           B00000005_21I6LW_20150603_084429E.JPG
## 7                           B00000006_21I6LW_20150603_084509E.JPG
## 8                           B00000007_21I6LW_20150603_084624E.JPG
## 9                           B00000008_21I6LW_20150603_084657E.JPG
## 10                          B00000009_21I6LW_20150603_084739E.JPG
## # ... with 945 more rows, and 9 more variables: image_time &lt;dttm&gt;,
## #   participant_id &lt;chr&gt;, `01a` &lt;lgl&gt;, `01b` &lt;lgl&gt;, `01c` &lt;lgl&gt;,
## #   `02b` &lt;lgl&gt;, `02a` &lt;lgl&gt;, `03a` &lt;lgl&gt;, `01.` &lt;lgl&gt;</code></pre>
<p>The data frame can be plotted:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/watchme_plot_raw.html">watchme_plot_raw</a></span>(results_table)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
</div>
<div id="from-the-coding-results-to-table-of-events" class="section level1">
<h1 class="hasAnchor">
<a href="#from-the-coding-results-to-table-of-events" class="anchor"> </a>From the coding results to table of events</h1>
<p>Using the annotations from the images, when can easily deduce a sequence of events. For instance having two subsequent pictures of washingYourTeeth taken at respectively t1 and t2 could be interpreted as having a washingYourTeeth event from t1 to t2. The <code>watchme_aggregate</code> allows the conversion from a <code>wearableCamImages</code> object to a table (<code>dplyr</code> class <code>tbl_df</code>) with</p>
<ul>
<li><p>event index from 1 to the number of events</p></li>
<li><p>start time (<code>POSIXt</code>),</p></li>
<li><p>end time (<code>POSIXt</code>),</p></li>
<li><p>eventCode (<code>character</code>),</p></li>
<li><p>startPicture and endPicture,</p></li>
<li><p>noOfPictures in the event.</p></li>
</ul>
<p>If pictures have several codes, then there can be synchronous events.</p>
<p>The function <code>watchme_aggregate</code> takes two arguments: a <code>tibble</code> created by <code>watchme_prepare_data</code> and a minimal duration for the events, in pictures, which is called <code>minDuration</code>. Below are two examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"coding_example"</span>)
eventTable &lt;-<span class="st"> </span><span class="kw"><a href="reference/watchme_aggregate.html">watchme_aggregate</a></span>(<span class="dt">df =</span> coding_example)
knitr::<span class="kw">kable</span>(<span class="kw">head</span>(eventTable))</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">event_code</th>
<th align="left">start_time</th>
<th align="left">end_time</th>
<th align="right">no_pictures</th>
<th align="right">start_picture</th>
<th align="right">end_picture</th>
<th align="left">group</th>
<th align="left">meaning</th>
<th align="right">duration</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01.</td>
<td align="left">2015-06-03 08:45:09</td>
<td align="left">2015-06-03 08:45:09</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">01.</td>
<td align="left">2015-06-03 09:13:34</td>
<td align="left">2015-06-03 09:13:34</td>
<td align="right">1</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">01.</td>
<td align="left">2015-06-03 09:15:24</td>
<td align="left">2015-06-03 09:15:24</td>
<td align="right">1</td>
<td align="right">53</td>
<td align="right">53</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">01.</td>
<td align="left">2015-06-03 09:16:46</td>
<td align="left">2015-06-03 09:22:23</td>
<td align="right">8</td>
<td align="right">55</td>
<td align="right">62</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">337</td>
</tr>
<tr class="odd">
<td align="left">01.</td>
<td align="left">2015-06-03 09:37:20</td>
<td align="left">2015-06-03 09:37:53</td>
<td align="right">2</td>
<td align="right">81</td>
<td align="right">82</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">33</td>
</tr>
<tr class="even">
<td align="left">01.</td>
<td align="left">2015-06-03 10:48:40</td>
<td align="left">2015-06-03 10:48:40</td>
<td align="right">1</td>
<td align="right">180</td>
<td align="right">180</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eventTable2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/watchme_aggregate.html">watchme_aggregate</a></span>(<span class="dt">df =</span> coding_example, <span class="dt">min_no_pictures =</span> <span class="dv">2</span>)
knitr::<span class="kw">kable</span>(<span class="kw">head</span>(eventTable2))</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">event_code</th>
<th align="left">start_time</th>
<th align="left">end_time</th>
<th align="right">no_pictures</th>
<th align="right">start_picture</th>
<th align="right">end_picture</th>
<th align="left">group</th>
<th align="left">meaning</th>
<th align="right">duration</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01.</td>
<td align="left">2015-06-03 09:16:46</td>
<td align="left">2015-06-03 09:22:23</td>
<td align="right">8</td>
<td align="right">55</td>
<td align="right">62</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">337</td>
</tr>
<tr class="even">
<td align="left">01.</td>
<td align="left">2015-06-03 09:37:20</td>
<td align="left">2015-06-03 09:37:53</td>
<td align="right">2</td>
<td align="right">81</td>
<td align="right">82</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">33</td>
</tr>
<tr class="odd">
<td align="left">01.</td>
<td align="left">2015-06-03 13:21:36</td>
<td align="left">2015-06-03 13:22:43</td>
<td align="right">3</td>
<td align="right">309</td>
<td align="right">311</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">67</td>
</tr>
<tr class="even">
<td align="left">01.</td>
<td align="left">2015-06-03 15:06:04</td>
<td align="left">2015-06-03 15:06:47</td>
<td align="right">2</td>
<td align="right">449</td>
<td align="right">450</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">43</td>
</tr>
<tr class="odd">
<td align="left">01.</td>
<td align="left">2015-06-04 06:13:30</td>
<td align="left">2015-06-04 06:16:37</td>
<td align="right">5</td>
<td align="right">801</td>
<td align="right">805</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">187</td>
</tr>
<tr class="even">
<td align="left">01.</td>
<td align="left">2015-06-04 06:21:13</td>
<td align="left">2015-06-04 06:35:26</td>
<td align="right">19</td>
<td align="right">811</td>
<td align="right">829</td>
<td align="left">99</td>
<td align="left">cooking</td>
<td align="right">853</td>
</tr>
</tbody>
</table>
</div>
<div id="plotting-a-table-of-events" class="section level1">
<h1 class="hasAnchor">
<a href="#plotting-a-table-of-events" class="anchor"> </a>Plotting a table of events</h1>
<p>The package provides a function using the R <code>ggplot2</code> package for plotting sequences of events.</p>
<p>Below are two examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"coding1"</span>)
event_table &lt;-<span class="st"> </span><span class="kw"><a href="reference/watchme_aggregate.html">watchme_aggregate</a></span>(<span class="dt">df =</span> coding1)
<span class="kw"><a href="reference/watchme_plot_sequence.html">watchme_plot_sequence</a></span>(event_table)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" width="960"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/watchme_plot_sequence.html">watchme_plot_sequence</a></span>(event_table, <span class="dt">x_axis =</span> <span class="st">"picture"</span>)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-8-2.png" width="960"></p>
<p>For plotting results from more than one coder, one could do this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"coding1"</span>)
<span class="kw">data</span>(<span class="st">"coding2"</span>)
dico &lt;-<span class="st"> </span><span class="kw">attr</span>(coding1, <span class="st">"dico"</span>)
event_table1 &lt;-<span class="st"> </span><span class="kw"><a href="reference/watchme_aggregate.html">watchme_aggregate</a></span>(<span class="dt">df =</span> coding1)
event_table1 &lt;-<span class="st"> </span><span class="kw">mutate</span>(event_table1, <span class="dt">coder =</span> <span class="st">"coder1"</span>)

event_table2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/watchme_aggregate.html">watchme_aggregate</a></span>(<span class="dt">df =</span> coding2)
event_table2 &lt;-<span class="st"> </span><span class="kw">mutate</span>(event_table2, <span class="dt">coder =</span> <span class="st">"coder2"</span>)

event_table &lt;-<span class="st"> </span>dplyr::<span class="kw">bind_rows</span>(event_table1, event_table2)

<span class="kw">attr</span>(event_table, <span class="st">"dico"</span>) &lt;-<span class="st"> </span>dico
<span class="kw"><a href="reference/watchme_plot_sequence.html">watchme_plot_sequence</a></span>(event_table) +
<span class="st">  </span><span class="kw">facet_grid</span>(coder ~<span class="st"> </span>.)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" width="960"></p>
</div>
<div id="calculating-interrater-agreement" class="section level1">
<h1 class="hasAnchor">
<a href="#calculating-interrater-agreement" class="anchor"> </a>Calculating interrater agreement</h1>
<p>An important aspect of coding images is having a list of annotations that provides consistent results acrossed (trained) coders, or raters. Therefore one needs to check and report interrater agreement.</p>
<div id="simply-look-at-disagreements" class="section level2">
<h2 class="hasAnchor">
<a href="#simply-look-at-disagreements" class="anchor"> </a>Simply look at disagreements</h2>
<p>In the package there is a function for getting the times and codes of pictures for which coders disagree, which might be useful for exploring differences when e.g. training coders.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"coding1"</span>)
<span class="kw">data</span>(<span class="st">"coding2"</span>)
results_list &lt;-<span class="st"> </span><span class="kw">list</span>(coding1, coding2)
names_list &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'Cain'</span>, <span class="st">'Abel'</span>)
<span class="kw"><a href="reference/watchme_output_differences.html">watchme_output_differences</a></span>(<span class="dt">results_list =</span> results_list,
                                <span class="dt">names_list =</span> names_list)</code></pre></div>
<pre><code>## # A tibble: 33 × 3
##                Cain             Abel          image_time
##               &lt;chr&gt;            &lt;chr&gt;              &lt;dttm&gt;
## 1   indoors, , , ,  , outdoors, , ,  2015-06-12 12:23:40
## 2     , , , mixed,  , outdoors, , ,  2015-06-12 12:24:59
## 3     , , , mixed,  , outdoors, , ,  2015-06-12 12:25:34
## 4     , , , mixed,  , outdoors, , ,  2015-06-12 13:08:17
## 5  , outdoors, , ,   indoors, , , ,  2015-06-12 13:10:01
## 6          , , , ,   indoors, , , ,  2015-06-12 15:19:45
## 7     , , , mixed,  , outdoors, , ,  2015-06-12 15:23:47
## 8     , , , mixed,  , outdoors, , ,  2015-06-12 15:24:23
## 9     , , , mixed,  , outdoors, , ,  2015-06-12 15:24:55
## 10  indoors, , , ,  , outdoors, , ,  2015-06-12 16:06:08
## # ... with 23 more rows</code></pre>
</div>
<div id="assess-interrater-agreement" class="section level2">
<h2 class="hasAnchor">
<a href="#assess-interrater-agreement" class="anchor"> </a>Assess interrater agreement</h2>
<p>Nowadays the state of the art is to use Cohen’s kappa for codes attributed to pictures, even if they are not independent (Aiden Doherty’s personal communication). In the package we provide a function for calculating interrater agreement (or IRR) this way, which is called <code>watchme_ira</code>. It uses functions of the <a href="https://cran.r-project.org/web/packages/irr/index.html">R <code>irr</code> package</a>. It allows using several possibilities for defining what codes are to be compared:</p>
<ul>
<li><p>one could compare the global annotations of all files, i.e. all codes at the same time. For instance compare washingYourTeeth; readingABook to washingYourTeeh; readingAMagazine for picture 1 between coder A and coder B. This is the default option.</p></li>
<li><p>one could look separately at each code using binary variables. For instance for washingYourTeeth comparing TRUE to TRUE and for readingABook TRUE to FALSE. For this one needs to set the <code>by_code</code> argument to TRUE.</p></li>
</ul>
<p>In the case in which wants to compare results provided by more than two coders, another choice to be made is whether all coders are to be compared together using Fleiss Kappa, or one to one using Cohen’s kappa. This is set with the <code>one_to_one</code> <code>logical</code> argument.</p>
<p>The comparison one wants to make depends on the context of the calculation of the IRR. When developping a new list of annotations one wants to see interrater agreement for each code, later when may want to report a single figure for the whole list of annotations.</p>
<p>Below are a few examples for two coders to be compared.</p>
<p>The default is to compare all annotations together.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">'coding1'</span>)
<span class="kw">data</span>(<span class="st">'coding2'</span>)
<span class="co"># With two coders</span>
results_list &lt;-<span class="st"> </span><span class="kw">list</span>(coding1, coding2)
names_list &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'Cain'</span>, <span class="st">'Abel'</span>)
ira_all &lt;-<span class="st"> </span><span class="kw"><a href="reference/watchme_ira.html">watchme_ira</a></span>(results_list, <span class="dt">names_list =</span> names_list)
<span class="kw">kable</span>(ira_all)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">method</th>
<th align="right">pictures</th>
<th align="right">agreed_on</th>
<th align="left">raters</th>
<th align="right">Kappa</th>
<th align="right">z</th>
<th align="right">p_value</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1230</td>
<td align="left">Cain, Abel</td>
<td align="right">0.8456533</td>
<td align="right">34.3822</td>
<td align="right">0</td>
</tr></tbody>
</table>
<p>Here we compare annotations by code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ira_codes &lt;-<span class="st"> </span><span class="kw"><a href="reference/watchme_ira.html">watchme_ira</a></span>(results_list, <span class="dt">names_list =</span> names_list, <span class="dt">by_code =</span> <span class="ot">TRUE</span>)
<span class="kw">kable</span>(ira_codes)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">code</th>
<th align="left">method</th>
<th align="right">pictures</th>
<th align="right">agreed_on</th>
<th align="left">raters</th>
<th align="right">Kappa</th>
<th align="right">z</th>
<th align="right">p_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">indoors</td>
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1251</td>
<td align="left">Cain, Abel</td>
<td align="right">0.9430487</td>
<td align="right">33.52833</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">outdoors</td>
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1232</td>
<td align="left">Cain, Abel</td>
<td align="right">0.8296414</td>
<td align="right">29.86610</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">in_vehicle</td>
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1263</td>
<td align="left">Cain, Abel</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="even">
<td align="left">mixed</td>
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1241</td>
<td align="left">Cain, Abel</td>
<td align="right">0.0000000</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="odd">
<td align="left">non_codable</td>
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1263</td>
<td align="left">Cain, Abel</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
</tbody>
</table>
<p>And then for more than two coders. If we do the comparison one by one, the resulting table has as many lines as there are possible pairs of coders. Here we compare all annotations together but even when comparing more than two coders you can do it by group of codes or by code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results_list2 &lt;-<span class="st"> </span><span class="kw">list</span>(coding1, coding1, coding2)
names_list2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'Riri'</span>, <span class="st">'Fifi'</span>, <span class="st">'Loulou'</span>)
<span class="kw"><a href="reference/watchme_ira.html">watchme_ira</a></span>(results_list2, <span class="dt">names_list =</span> names_list2, <span class="dt">one_to_one =</span> <span class="ot">FALSE</span>) %&gt;%
<span class="st">  </span><span class="kw">kable</span>()</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">method</th>
<th align="right">pictures</th>
<th align="right">agreed_on</th>
<th align="left">raters</th>
<th align="right">Kappa</th>
<th align="right">z</th>
<th align="right">p_value</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Fleiss’ Kappa for m Raters</td>
<td align="right">1263</td>
<td align="right">1230</td>
<td align="left">Riri, Fifi, Loulou</td>
<td align="right">0.8964106</td>
<td align="right">63.90226</td>
<td align="right">0</td>
</tr></tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/watchme_ira.html">watchme_ira</a></span>(results_list2, <span class="dt">names_list =</span> names_list2, <span class="dt">one_to_one =</span> <span class="ot">TRUE</span>)%&gt;%
<span class="st">  </span><span class="kw">kable</span>()</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">method</th>
<th align="right">pictures</th>
<th align="right">agreed_on</th>
<th align="left">raters</th>
<th align="right">Kappa</th>
<th align="right">z</th>
<th align="right">p_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1263</td>
<td align="left">Riri, Fifi</td>
<td align="right">1.0000000</td>
<td align="right">43.18003</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1230</td>
<td align="left">Riri, Loulou</td>
<td align="right">0.8456533</td>
<td align="right">34.38220</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Cohen’s Kappa for 2 Raters (Weights: unweighted)</td>
<td align="right">1263</td>
<td align="right">1230</td>
<td align="left">Fifi, Loulou</td>
<td align="right">0.8456533</td>
<td align="right">34.38220</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div id="meta" class="section level2">
<h2 class="hasAnchor">
<a href="#meta" class="anchor"> </a>Meta</h2>
<ul>
<li>Please <a href="https://github.com/masalmon/watchme/issues">report any issues or bugs</a>.</li>
<li>License: GPL</li>
<li>Get citation information for <code>opencage</code> in R doing <code>citation(package = 'watchme')</code>
</li>
<li>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</li>
</ul>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="http://github.com/masalmon/watchme">http://​github.com/​masalmon/​watchme</a>
</li>
<li>Report a bug at <br><a href="http://github.com/masalmon/watchme/issues">http://​github.com/​masalmon/​watchme/​issues</a>
</li>
</ul>
<h2>License</h2>
<p>GPL (&gt;= 2)</p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Maëlle Salmon <br><small class="roles"> Author, maintainer </small> </li>
</ul>
<html><body>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/masalmon/watchme"><img src="https://travis-ci.org/masalmon/watchme.svg" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/masalmon/watchme"><img src="https://ci.appveyor.com/api/projects/status/6om2pq1kunx4wfuw?svg=true" alt="Build status"></a></li>
<li><a href="https://codecov.io/github/masalmon/watchme?branch=master"><img src="https://codecov.io/github/masalmon/watchme/coverage.svg?branch=master" alt="codecov.io"></a></li>
</ul>
</body></html>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Maëlle Salmon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
